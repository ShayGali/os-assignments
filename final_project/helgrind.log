==53135== Helgrind, a thread error detector
==53135== Copyright (C) 2007-2017, and GNU GPL'd, by OpenWorks LLP et al.
==53135== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info
==53135== Command: ./main -l
==53135== Parent PID: 12724
==53135== 
==53135== ---Thread-Announcement------------------------------------------
==53135== 
==53135== Thread #1 is the program's root thread
==53135== 
==53135== ---Thread-Announcement------------------------------------------
==53135== 
==53135== Thread #2 was created
==53135==    at 0x4BA0342: clone (clone.S:71)
==53135==    by 0x4A652EB: create_thread (createthread.c:101)
==53135==    by 0x4A66E0F: pthread_create@@GLIBC_2.2.5 (pthread_create.c:817)
==53135==    by 0x4842917: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==53135==    by 0x49380C9: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.28)
==53135==    by 0x120B68: std::thread::thread<void (LeaderFollower::*)(), LeaderFollower*, void>(void (LeaderFollower::*&&)(), LeaderFollower*&&) (thread:130)
==53135==    by 0x11DF04: void __gnu_cxx::new_allocator<std::thread>::construct<std::thread, void (LeaderFollower::*)(), LeaderFollower*>(std::thread*, void (LeaderFollower::*&&)(), LeaderFollower*&&) (new_allocator.h:146)
==53135==    by 0x11B073: void std::allocator_traits<std::allocator<std::thread> >::construct<std::thread, void (LeaderFollower::*)(), LeaderFollower*>(std::allocator<std::thread>&, std::thread*, void (LeaderFollower::*&&)(), LeaderFollower*&&) (alloc_traits.h:483)
==53135==    by 0x11B161: void std::vector<std::thread, std::allocator<std::thread> >::_M_realloc_insert<void (LeaderFollower::*)(), LeaderFollower*>(__gnu_cxx::__normal_iterator<std::thread*, std::vector<std::thread, std::allocator<std::thread> > >, void (LeaderFollower::*&&)(), LeaderFollower*&&) (vector.tcc:449)
==53135==    by 0x117E5B: std::thread& std::vector<std::thread, std::allocator<std::thread> >::emplace_back<void (LeaderFollower::*)(), LeaderFollower*>(void (LeaderFollower::*&&)(), LeaderFollower*&&) (vector.tcc:121)
==53135==    by 0x112DC4: LeaderFollower::LeaderFollower() (LFHandler.hpp:22)
==53135==    by 0x1131DF: LFHandler::LFHandler(std::map<int, std::pair<Graph, TreeOnGraph>, std::less<int>, std::allocator<std::pair<int const, std::pair<Graph, TreeOnGraph> > > >&, MSTFactory&) (LFHandler.hpp:80)
==53135== 
==53135== ----------------------------------------------------------------
==53135== 
==53135== Possible data race during read of size 8 at 0x4DDA458 by thread #1
==53135== Locks held: none
==53135==    at 0x11D886: std::__uniq_ptr_impl<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>::_M_ptr() const (unique_ptr.h:154)
==53135==    by 0x11A865: std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>::get() const (unique_ptr.h:361)
==53135==    by 0x11761F: std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>::operator*() const (unique_ptr.h:347)
==53135==    by 0x112642: std::__future_base::_State_baseV2::wait() (future:338)
==53135==    by 0x11B961: std::__basic_future<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::_M_get_result() const (future:717)
==53135==    by 0x1185CE: std::future<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::get() (future:796)
==53135==    by 0x1133B7: LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int) (LFHandler.hpp:93)
==53135==    by 0x1108C9: main (main.cpp:225)
==53135== 
==53135== This conflicts with a previous write of size 8 by thread #2
==53135== Locks held: none
==53135==    at 0x11D9FA: std::enable_if<std::__and_<std::__not_<std::__is_tuple_like<std::__future_base::_Result_base*> >, std::is_move_constructible<std::__future_base::_Result_base*>, std::is_move_assignable<std::__future_base::_Result_base*> >::value, void>::type std::swap<std::__future_base::_Result_base*>(std::__future_base::_Result_base*&, std::__future_base::_Result_base*&) (move.h:194)
==53135==    by 0x11AB66: std::__uniq_ptr_impl<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>::swap(std::__uniq_ptr_impl<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>&) (unique_ptr.h:162)
==53135==    by 0x117AB0: std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>::swap(std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>&) (unique_ptr.h:410)
==53135==    by 0x112B51: std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) (future:566)
==53135==    by 0x11D926: void std::__invoke_impl<void, void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::__invoke_memfun_deref, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:73)
==53135==    by 0x11A91A: std::__invoke_result<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>::type std::__invoke<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:95)
==53135==    by 0x1176B3: void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::{lambda()#1}::operator()() const (mutex:671)
==53135==    by 0x1176E2: void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::{lambda()#2}::operator()() const (mutex:676)
==53135==  Address 0x4dda458 is 24 bytes inside a block of size 112 alloc'd
==53135==    at 0x483CF03: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==53135==    by 0x12C64F: __gnu_cxx::new_allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2> >::allocate(unsigned long, void const*) (new_allocator.h:114)
==53135==    by 0x12C369: std::allocator_traits<std::allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2> > >::allocate(std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2>&, unsigned long) (alloc_traits.h:443)
==53135==    by 0x12BEA5: std::__allocated_ptr<std::allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2> > > std::__allocate_guarded<std::allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2> > >(std::__allocated_ptr&) (allocated_ptr.h:97)
==53135==    by 0x12BAD3: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*&, std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:677)
==53135==    by 0x12B941: std::__shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:1344)
==53135==    by 0x12B73C: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >::shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:359)
==53135==    by 0x12B5A9: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::allocate_shared<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:702)
==53135==    by 0x110AFB: std::shared_ptr<std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::__create_task_state<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int> >(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&, std::allocator<int> const&) (future:1454)
==53135==    by 0x12A722: std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::packaged_task<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, void>(std::allocator_arg_t, std::allocator<int> const&, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&) (future:1501)
==53135==    by 0x1292A6: std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::packaged_task<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, void>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&) (future:1492)
==53135==    by 0x128984: void __gnu_cxx::new_allocator<std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >::construct<std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >(std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&) (new_allocator.h:146)
==53135==  Block was alloc'd by thread #1
==53135== 
==53135== ----------------------------------------------------------------
==53135== 
==53135== Possible data race during read of size 8 at 0x4DDA500 by thread #1
==53135== Locks held: none
==53135==    at 0x1199D8: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_data() const (basic_string.h:191)
==53135==    by 0x11A66A: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_is_local() const (basic_string.h:226)
==53135==    by 0x1172E3: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&) (basic_string.h:559)
==53135==    by 0x1185F0: std::future<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::get() (future:796)
==53135==    by 0x1133B7: LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int) (LFHandler.hpp:93)
==53135==    by 0x1108C9: main (main.cpp:225)
==53135== 
==53135== This conflicts with a previous write of size 8 by thread #2
==53135== Locks held: none
==53135==    at 0x119CF4: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Alloc_hider::_Alloc_hider(char*, std::allocator<char>&&) (basic_string.h:164)
==53135==    by 0x1172D7: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&) (basic_string.h:557)
==53135==    by 0x12FAE9: std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::_M_set(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&) (future:258)
==53135==    by 0x12F549: std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_M_run()::{lambda()#1}, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::operator()() const (future:1339)
==53135==    by 0x12EB46: std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_M_run()::{lambda()#1}, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >::_M_invoke(std::_Any_data const&) (std_function.h:286)
==53135==    by 0x117B03: std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>::operator()() const (std_function.h:688)
==53135==    by 0x112B33: std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) (future:561)
==53135==    by 0x11D926: void std::__invoke_impl<void, void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::__invoke_memfun_deref, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:73)
==53135==  Address 0x4dda500 is 16 bytes inside a block of size 56 alloc'd
==53135==    at 0x483CF03: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==53135==    by 0x12CCB9: std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter> std::__future_base::_S_allocate_result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int>(std::allocator<int> const&) (future:303)
==53135==    by 0x12CB56: std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_Task_state_base<std::allocator<int> >(std::allocator<int> const&) (future:1387)
==53135==    by 0x12C9D5: std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_Task_state<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>(LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (future:1413)
==53135==    by 0x12C718: void __gnu_cxx::new_allocator<int>::construct<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (new_allocator.h:146)
==53135==    by 0x12C461: void std::allocator_traits<std::allocator<int> >::construct<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::allocator<int> const&>(std::allocator<int>&, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::allocator<int> const&) (alloc_traits.h:483)
==53135==    by 0x12C020: std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:548)
==53135==    by 0x12BB46: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*&, std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:679)
==53135==    by 0x12B941: std::__shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:1344)
==53135==    by 0x12B73C: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >::shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:359)
==53135==    by 0x12B5A9: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::allocate_shared<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:702)
==53135==    by 0x110AFB: std::shared_ptr<std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::__create_task_state<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int> >(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&, std::allocator<int> const&) (future:1454)
==53135==  Block was alloc'd by thread #1
==53135== 
==53135== ----------------------------------------------------------------
==53135== 
==53135== Possible data race during read of size 8 at 0x4DDA510 by thread #1
==53135== Locks held: none
==53135==    at 0x11732C: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&) (basic_string.h:567)
==53135==    by 0x1185F0: std::future<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::get() (future:796)
==53135==    by 0x1133B7: LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int) (LFHandler.hpp:93)
==53135==    by 0x1108C9: main (main.cpp:225)
==53135== 
==53135== This conflicts with a previous write of size 8 by thread #2
==53135== Locks held: none
==53135==    at 0x11A6BE: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_capacity(unsigned long) (basic_string.h:215)
==53135==    by 0x11733E: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&) (basic_string.h:567)
==53135==    by 0x12FAE9: std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::_M_set(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&) (future:258)
==53135==    by 0x12F549: std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_M_run()::{lambda()#1}, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::operator()() const (future:1339)
==53135==    by 0x12EB46: std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_M_run()::{lambda()#1}, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >::_M_invoke(std::_Any_data const&) (std_function.h:286)
==53135==    by 0x117B03: std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>::operator()() const (std_function.h:688)
==53135==    by 0x112B33: std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) (future:561)
==53135==    by 0x11D926: void std::__invoke_impl<void, void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::__invoke_memfun_deref, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:73)
==53135==  Address 0x4dda510 is 32 bytes inside a block of size 56 alloc'd
==53135==    at 0x483CF03: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==53135==    by 0x12CCB9: std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter> std::__future_base::_S_allocate_result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int>(std::allocator<int> const&) (future:303)
==53135==    by 0x12CB56: std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_Task_state_base<std::allocator<int> >(std::allocator<int> const&) (future:1387)
==53135==    by 0x12C9D5: std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_Task_state<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>(LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (future:1413)
==53135==    by 0x12C718: void __gnu_cxx::new_allocator<int>::construct<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (new_allocator.h:146)
==53135==    by 0x12C461: void std::allocator_traits<std::allocator<int> >::construct<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::allocator<int> const&>(std::allocator<int>&, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::allocator<int> const&) (alloc_traits.h:483)
==53135==    by 0x12C020: std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:548)
==53135==    by 0x12BB46: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*&, std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:679)
==53135==    by 0x12B941: std::__shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:1344)
==53135==    by 0x12B73C: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >::shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:359)
==53135==    by 0x12B5A9: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::allocate_shared<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:702)
==53135==    by 0x110AFB: std::shared_ptr<std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::__create_task_state<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int> >(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&, std::allocator<int> const&) (future:1454)
==53135==  Block was alloc'd by thread #1
==53135== 
==53135== ----------------------------------------------------------------
==53135== 
==53135== Possible data race during read of size 8 at 0x4DDA508 by thread #1
==53135== Locks held: none
==53135==    at 0x11694E: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::length() const (basic_string.h:941)
==53135==    by 0x11734A: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&) (basic_string.h:573)
==53135==    by 0x1185F0: std::future<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::get() (future:796)
==53135==    by 0x1133B7: LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int) (LFHandler.hpp:93)
==53135==    by 0x1108C9: main (main.cpp:225)
==53135== 
==53135== This conflicts with a previous write of size 8 by thread #2
==53135== Locks held: none
==53135==    at 0x11A6DE: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_length(unsigned long) (basic_string.h:187)
==53135==    by 0x11735C: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&) (basic_string.h:573)
==53135==    by 0x12FAE9: std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::_M_set(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&) (future:258)
==53135==    by 0x12F549: std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_M_run()::{lambda()#1}, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::operator()() const (future:1339)
==53135==    by 0x12EB46: std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_M_run()::{lambda()#1}, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >::_M_invoke(std::_Any_data const&) (std_function.h:286)
==53135==    by 0x117B03: std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>::operator()() const (std_function.h:688)
==53135==    by 0x112B33: std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) (future:561)
==53135==    by 0x11D926: void std::__invoke_impl<void, void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::__invoke_memfun_deref, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:73)
==53135==  Address 0x4dda508 is 24 bytes inside a block of size 56 alloc'd
==53135==    at 0x483CF03: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==53135==    by 0x12CCB9: std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter> std::__future_base::_S_allocate_result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int>(std::allocator<int> const&) (future:303)
==53135==    by 0x12CB56: std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_Task_state_base<std::allocator<int> >(std::allocator<int> const&) (future:1387)
==53135==    by 0x12C9D5: std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_Task_state<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>(LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (future:1413)
==53135==    by 0x12C718: void __gnu_cxx::new_allocator<int>::construct<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (new_allocator.h:146)
==53135==    by 0x12C461: void std::allocator_traits<std::allocator<int> >::construct<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::allocator<int> const&>(std::allocator<int>&, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::allocator<int> const&) (alloc_traits.h:483)
==53135==    by 0x12C020: std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:548)
==53135==    by 0x12BB46: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*&, std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:679)
==53135==    by 0x12B941: std::__shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:1344)
==53135==    by 0x12B73C: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >::shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:359)
==53135==    by 0x12B5A9: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::allocate_shared<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:702)
==53135==    by 0x110AFB: std::shared_ptr<std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::__create_task_state<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int> >(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&, std::allocator<int> const&) (future:1454)
==53135==  Block was alloc'd by thread #1
==53135== 
==53135== ----------------------------------------------------------------
==53135== 
==53135== Possible data race during write of size 8 at 0x4DDA500 by thread #1
==53135== Locks held: none
==53135==    at 0x11A6A0: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_data(char*) (basic_string.h:183)
==53135==    by 0x11737A: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&) (basic_string.h:574)
==53135==    by 0x1185F0: std::future<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::get() (future:796)
==53135==    by 0x1133B7: LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int) (LFHandler.hpp:93)
==53135==    by 0x1108C9: main (main.cpp:225)
==53135== 
==53135== This conflicts with a previous write of size 8 by thread #2
==53135== Locks held: none
==53135==    at 0x119CF4: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Alloc_hider::_Alloc_hider(char*, std::allocator<char>&&) (basic_string.h:164)
==53135==    by 0x1172D7: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&) (basic_string.h:557)
==53135==    by 0x12FAE9: std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::_M_set(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&) (future:258)
==53135==    by 0x12F549: std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_M_run()::{lambda()#1}, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::operator()() const (future:1339)
==53135==    by 0x12EB46: std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_M_run()::{lambda()#1}, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >::_M_invoke(std::_Any_data const&) (std_function.h:286)
==53135==    by 0x117B03: std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>::operator()() const (std_function.h:688)
==53135==    by 0x112B33: std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) (future:561)
==53135==    by 0x11D926: void std::__invoke_impl<void, void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::__invoke_memfun_deref, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:73)
==53135==  Address 0x4dda500 is 16 bytes inside a block of size 56 alloc'd
==53135==    at 0x483CF03: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==53135==    by 0x12CCB9: std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter> std::__future_base::_S_allocate_result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int>(std::allocator<int> const&) (future:303)
==53135==    by 0x12CB56: std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_Task_state_base<std::allocator<int> >(std::allocator<int> const&) (future:1387)
==53135==    by 0x12C9D5: std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_Task_state<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>(LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (future:1413)
==53135==    by 0x12C718: void __gnu_cxx::new_allocator<int>::construct<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (new_allocator.h:146)
==53135==    by 0x12C461: void std::allocator_traits<std::allocator<int> >::construct<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::allocator<int> const&>(std::allocator<int>&, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::allocator<int> const&) (alloc_traits.h:483)
==53135==    by 0x12C020: std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:548)
==53135==    by 0x12BB46: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*&, std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:679)
==53135==    by 0x12B941: std::__shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:1344)
==53135==    by 0x12B73C: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >::shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:359)
==53135==    by 0x12B5A9: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::allocate_shared<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:702)
==53135==    by 0x110AFB: std::shared_ptr<std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::__create_task_state<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int> >(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&, std::allocator<int> const&) (future:1454)
==53135==  Block was alloc'd by thread #1
==53135== 
==53135== ----------------------------------------------------------------
==53135== 
==53135== Possible data race during write of size 8 at 0x4DDA508 by thread #1
==53135== Locks held: none
==53135==    at 0x11A6DE: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_length(unsigned long) (basic_string.h:187)
==53135==    by 0x119D2F: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_set_length(unsigned long) (basic_string.h:220)
==53135==    by 0x11738B: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&) (basic_string.h:575)
==53135==    by 0x1185F0: std::future<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::get() (future:796)
==53135==    by 0x1133B7: LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int) (LFHandler.hpp:93)
==53135==    by 0x1108C9: main (main.cpp:225)
==53135== 
==53135== This conflicts with a previous write of size 8 by thread #2
==53135== Locks held: none
==53135==    at 0x11A6DE: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_length(unsigned long) (basic_string.h:187)
==53135==    by 0x11735C: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&) (basic_string.h:573)
==53135==    by 0x12FAE9: std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::_M_set(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&) (future:258)
==53135==    by 0x12F549: std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_M_run()::{lambda()#1}, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::operator()() const (future:1339)
==53135==    by 0x12EB46: std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_M_run()::{lambda()#1}, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >::_M_invoke(std::_Any_data const&) (std_function.h:286)
==53135==    by 0x117B03: std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>::operator()() const (std_function.h:688)
==53135==    by 0x112B33: std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) (future:561)
==53135==    by 0x11D926: void std::__invoke_impl<void, void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::__invoke_memfun_deref, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:73)
==53135==  Address 0x4dda508 is 24 bytes inside a block of size 56 alloc'd
==53135==    at 0x483CF03: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==53135==    by 0x12CCB9: std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter> std::__future_base::_S_allocate_result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int>(std::allocator<int> const&) (future:303)
==53135==    by 0x12CB56: std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_Task_state_base<std::allocator<int> >(std::allocator<int> const&) (future:1387)
==53135==    by 0x12C9D5: std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_Task_state<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>(LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (future:1413)
==53135==    by 0x12C718: void __gnu_cxx::new_allocator<int>::construct<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (new_allocator.h:146)
==53135==    by 0x12C461: void std::allocator_traits<std::allocator<int> >::construct<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::allocator<int> const&>(std::allocator<int>&, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::allocator<int> const&) (alloc_traits.h:483)
==53135==    by 0x12C020: std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:548)
==53135==    by 0x12BB46: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*&, std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:679)
==53135==    by 0x12B941: std::__shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:1344)
==53135==    by 0x12B73C: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >::shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:359)
==53135==    by 0x12B5A9: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::allocate_shared<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:702)
==53135==    by 0x110AFB: std::shared_ptr<std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::__create_task_state<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int> >(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&, std::allocator<int> const&) (future:1454)
==53135==  Block was alloc'd by thread #1
==53135== 
==53135== ----------------------------------------------------------------
==53135== 
==53135== Possible data race during write of size 1 at 0x4DDA510 by thread #1
==53135== Locks held: none
==53135==    at 0x11105E: std::char_traits<char>::assign(char&, char const&) (char_traits.h:300)
==53135==    by 0x119D55: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_set_length(unsigned long) (basic_string.h:221)
==53135==    by 0x11738B: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&) (basic_string.h:575)
==53135==    by 0x1185F0: std::future<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::get() (future:796)
==53135==    by 0x1133B7: LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int) (LFHandler.hpp:93)
==53135==    by 0x1108C9: main (main.cpp:225)
==53135== 
==53135== This conflicts with a previous write of size 8 by thread #2
==53135== Locks held: none
==53135==    at 0x11A6BE: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_capacity(unsigned long) (basic_string.h:215)
==53135==    by 0x11733E: std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&) (basic_string.h:567)
==53135==    by 0x12FAE9: std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::_M_set(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&) (future:258)
==53135==    by 0x12F549: std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_M_run()::{lambda()#1}, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::operator()() const (future:1339)
==53135==    by 0x12EB46: std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_M_run()::{lambda()#1}, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >::_M_invoke(std::_Any_data const&) (std_function.h:286)
==53135==    by 0x117B03: std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>::operator()() const (std_function.h:688)
==53135==    by 0x112B33: std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) (future:561)
==53135==    by 0x11D926: void std::__invoke_impl<void, void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::__invoke_memfun_deref, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:73)
==53135==  Address 0x4dda510 is 32 bytes inside a block of size 56 alloc'd
==53135==    at 0x483CF03: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==53135==    by 0x12CCB9: std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter> std::__future_base::_S_allocate_result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int>(std::allocator<int> const&) (future:303)
==53135==    by 0x12CB56: std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_Task_state_base<std::allocator<int> >(std::allocator<int> const&) (future:1387)
==53135==    by 0x12C9D5: std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_Task_state<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>(LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (future:1413)
==53135==    by 0x12C718: void __gnu_cxx::new_allocator<int>::construct<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (new_allocator.h:146)
==53135==    by 0x12C461: void std::allocator_traits<std::allocator<int> >::construct<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::allocator<int> const&>(std::allocator<int>&, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::allocator<int> const&) (alloc_traits.h:483)
==53135==    by 0x12C020: std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:548)
==53135==    by 0x12BB46: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*&, std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:679)
==53135==    by 0x12B941: std::__shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:1344)
==53135==    by 0x12B73C: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >::shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:359)
==53135==    by 0x12B5A9: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::allocate_shared<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:702)
==53135==    by 0x110AFB: std::shared_ptr<std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::__create_task_state<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int> >(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&, std::allocator<int> const&) (future:1454)
==53135==  Block was alloc'd by thread #1
==53135== 
==53135== ----------------------------------------------------------------
==53135== 
==53135== Possible data race during write of size 8 at 0x4DDA450 by thread #1
==53135== Locks held: none
==53135==    at 0x12CF1F: std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::~_Task_state() (future:1407)
==53135==    by 0x12E60B: void __gnu_cxx::new_allocator<int>::destroy<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*) (new_allocator.h:152)
==53135==    by 0x12DFA8: void std::allocator_traits<std::allocator<int> >::destroy<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >(std::allocator<int>&, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*) (alloc_traits.h:496)
==53135==    by 0x12D400: std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() (shared_ptr_base.h:557)
==53135==    by 0x11A72B: std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() (shared_ptr_base.h:155)
==53135==    by 0x1173DA: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() (shared_ptr_base.h:730)
==53135==    by 0x112BB9: std::__shared_ptr<std::__future_base::_State_baseV2, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() (shared_ptr_base.h:1169)
==53135==    by 0x11AC0F: std::__shared_ptr<std::__future_base::_State_baseV2, (__gnu_cxx::_Lock_policy)2>::reset() (shared_ptr_base.h:1287)
==53135==    by 0x11B91E: std::__basic_future<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::_Reset::~_Reset() (future:753)
==53135==    by 0x1185FC: std::future<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::get() (future:795)
==53135==    by 0x1133B7: LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int) (LFHandler.hpp:93)
==53135==    by 0x1108C9: main (main.cpp:225)
==53135== 
==53135== This conflicts with a previous read of size 8 by thread #2
==53135== Locks held: none
==53135==    at 0x11B828: std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::operator()() (future:1551)
==53135==    by 0x118304: std::future<std::result_of<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>::type> LeaderFollower::addTask<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1}>(std::result_of&&, (LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1}&&)...)::{lambda()#1}::operator()() const (LFHandler.hpp:48)
==53135==    by 0x124F15: std::_Function_handler<void (), std::future<std::result_of<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>::type> LeaderFollower::addTask<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1}>(std::result_of&&, (LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1}&&)...)::{lambda()#1}>::_M_invoke(std::_Any_data const&) (std_function.h:300)
==53135==    by 0x11817B: std::function<void ()>::operator()() const (std_function.h:688)
==53135==    by 0x1130D1: LeaderFollower::workerThread() (LFHandler.hpp:67)
==53135==    by 0x12FD75: void std::__invoke_impl<void, void (LeaderFollower::*)(), LeaderFollower*>(std::__invoke_memfun_deref, void (LeaderFollower::*&&)(), LeaderFollower*&&) (invoke.h:73)
==53135==    by 0x12F989: std::__invoke_result<void (LeaderFollower::*)(), LeaderFollower*>::type std::__invoke<void (LeaderFollower::*)(), LeaderFollower*>(void (LeaderFollower::*&&)(), LeaderFollower*&&) (invoke.h:95)
==53135==    by 0x12EEF4: void std::thread::_Invoker<std::tuple<void (LeaderFollower::*)(), LeaderFollower*> >::_M_invoke<0ul, 1ul>(std::_Index_tuple<0ul, 1ul>) (thread:244)
==53135==  Address 0x4dda450 is 16 bytes inside a block of size 112 alloc'd
==53135==    at 0x483CF03: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==53135==    by 0x12C64F: __gnu_cxx::new_allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2> >::allocate(unsigned long, void const*) (new_allocator.h:114)
==53135==    by 0x12C369: std::allocator_traits<std::allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2> > >::allocate(std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2>&, unsigned long) (alloc_traits.h:443)
==53135==    by 0x12BEA5: std::__allocated_ptr<std::allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2> > > std::__allocate_guarded<std::allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2> > >(std::__allocated_ptr&) (allocated_ptr.h:97)
==53135==    by 0x12BAD3: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*&, std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:677)
==53135==    by 0x12B941: std::__shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:1344)
==53135==    by 0x12B73C: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >::shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:359)
==53135==    by 0x12B5A9: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::allocate_shared<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:702)
==53135==    by 0x110AFB: std::shared_ptr<std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::__create_task_state<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int> >(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&, std::allocator<int> const&) (future:1454)
==53135==    by 0x12A722: std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::packaged_task<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, void>(std::allocator_arg_t, std::allocator<int> const&, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&) (future:1501)
==53135==    by 0x1292A6: std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::packaged_task<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, void>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&) (future:1492)
==53135==    by 0x128984: void __gnu_cxx::new_allocator<std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >::construct<std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >(std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&) (new_allocator.h:146)
==53135==  Block was alloc'd by thread #1
==53135== 
==53135== ----------------------------------------------------------------
==53135== 
==53135== Possible data race during read of size 8 at 0x4DDA470 by thread #1
==53135== Locks held: none
==53135==    at 0x12CBB7: std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>::~unique_ptr() (unique_ptr.h:291)
==53135==    by 0x12C93D: std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::~_Task_state_base() (future:1380)
==53135==    by 0x12CF3D: std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::~_Task_state() (future:1407)
==53135==    by 0x12E60B: void __gnu_cxx::new_allocator<int>::destroy<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*) (new_allocator.h:152)
==53135==    by 0x12DFA8: void std::allocator_traits<std::allocator<int> >::destroy<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >(std::allocator<int>&, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*) (alloc_traits.h:496)
==53135==    by 0x12D400: std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() (shared_ptr_base.h:557)
==53135==    by 0x11A72B: std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() (shared_ptr_base.h:155)
==53135==    by 0x1173DA: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() (shared_ptr_base.h:730)
==53135==    by 0x112BB9: std::__shared_ptr<std::__future_base::_State_baseV2, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() (shared_ptr_base.h:1169)
==53135==    by 0x11AC0F: std::__shared_ptr<std::__future_base::_State_baseV2, (__gnu_cxx::_Lock_policy)2>::reset() (shared_ptr_base.h:1287)
==53135==    by 0x11B91E: std::__basic_future<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::_Reset::~_Reset() (future:753)
==53135==    by 0x1185FC: std::future<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::get() (future:795)
==53135== 
==53135== This conflicts with a previous write of size 8 by thread #2
==53135== Locks held: none
==53135==    at 0x12B61A: std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>::release() (unique_ptr.h:384)
==53135==    by 0x12FB37: std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>::unique_ptr(std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>&&) (unique_ptr.h:258)
==53135==    by 0x12F576: std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_M_run()::{lambda()#1}, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::operator()() const (future:1349)
==53135==    by 0x12EB46: std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_M_run()::{lambda()#1}, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >::_M_invoke(std::_Any_data const&) (std_function.h:286)
==53135==    by 0x117B03: std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>::operator()() const (std_function.h:688)
==53135==    by 0x112B33: std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) (future:561)
==53135==    by 0x11D926: void std::__invoke_impl<void, void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::__invoke_memfun_deref, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:73)
==53135==    by 0x11A91A: std::__invoke_result<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>::type std::__invoke<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:95)
==53135==  Address 0x4dda470 is 48 bytes inside a block of size 112 alloc'd
==53135==    at 0x483CF03: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==53135==    by 0x12C64F: __gnu_cxx::new_allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2> >::allocate(unsigned long, void const*) (new_allocator.h:114)
==53135==    by 0x12C369: std::allocator_traits<std::allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2> > >::allocate(std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2>&, unsigned long) (alloc_traits.h:443)
==53135==    by 0x12BEA5: std::__allocated_ptr<std::allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2> > > std::__allocate_guarded<std::allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2> > >(std::__allocated_ptr&) (allocated_ptr.h:97)
==53135==    by 0x12BAD3: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*&, std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:677)
==53135==    by 0x12B941: std::__shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:1344)
==53135==    by 0x12B73C: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >::shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:359)
==53135==    by 0x12B5A9: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::allocate_shared<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:702)
==53135==    by 0x110AFB: std::shared_ptr<std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::__create_task_state<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int> >(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&, std::allocator<int> const&) (future:1454)
==53135==    by 0x12A722: std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::packaged_task<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, void>(std::allocator_arg_t, std::allocator<int> const&, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&) (future:1501)
==53135==    by 0x1292A6: std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::packaged_task<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, void>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&) (future:1492)
==53135==    by 0x128984: void __gnu_cxx::new_allocator<std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >::construct<std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >(std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&) (new_allocator.h:146)
==53135==  Block was alloc'd by thread #1
==53135== 
==53135== ----------------------------------------------------------------
==53135== 
==53135== Possible data race during write of size 8 at 0x4DDA470 by thread #1
==53135== Locks held: none
==53135==    at 0x12CBEC: std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>::~unique_ptr() (unique_ptr.h:293)
==53135==    by 0x12C93D: std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::~_Task_state_base() (future:1380)
==53135==    by 0x12CF3D: std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::~_Task_state() (future:1407)
==53135==    by 0x12E60B: void __gnu_cxx::new_allocator<int>::destroy<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*) (new_allocator.h:152)
==53135==    by 0x12DFA8: void std::allocator_traits<std::allocator<int> >::destroy<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >(std::allocator<int>&, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*) (alloc_traits.h:496)
==53135==    by 0x12D400: std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() (shared_ptr_base.h:557)
==53135==    by 0x11A72B: std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() (shared_ptr_base.h:155)
==53135==    by 0x1173DA: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() (shared_ptr_base.h:730)
==53135==    by 0x112BB9: std::__shared_ptr<std::__future_base::_State_baseV2, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() (shared_ptr_base.h:1169)
==53135==    by 0x11AC0F: std::__shared_ptr<std::__future_base::_State_baseV2, (__gnu_cxx::_Lock_policy)2>::reset() (shared_ptr_base.h:1287)
==53135==    by 0x11B91E: std::__basic_future<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::_Reset::~_Reset() (future:753)
==53135==    by 0x1185FC: std::future<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::get() (future:795)
==53135== 
==53135== This conflicts with a previous write of size 8 by thread #2
==53135== Locks held: none
==53135==    at 0x12B61A: std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>::release() (unique_ptr.h:384)
==53135==    by 0x12FB37: std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>::unique_ptr(std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>&&) (unique_ptr.h:258)
==53135==    by 0x12F576: std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_M_run()::{lambda()#1}, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::operator()() const (future:1349)
==53135==    by 0x12EB46: std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_M_run()::{lambda()#1}, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >::_M_invoke(std::_Any_data const&) (std_function.h:286)
==53135==    by 0x117B03: std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>::operator()() const (std_function.h:688)
==53135==    by 0x112B33: std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) (future:561)
==53135==    by 0x11D926: void std::__invoke_impl<void, void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::__invoke_memfun_deref, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:73)
==53135==    by 0x11A91A: std::__invoke_result<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>::type std::__invoke<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:95)
==53135==  Address 0x4dda470 is 48 bytes inside a block of size 112 alloc'd
==53135==    at 0x483CF03: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==53135==    by 0x12C64F: __gnu_cxx::new_allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2> >::allocate(unsigned long, void const*) (new_allocator.h:114)
==53135==    by 0x12C369: std::allocator_traits<std::allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2> > >::allocate(std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2>&, unsigned long) (alloc_traits.h:443)
==53135==    by 0x12BEA5: std::__allocated_ptr<std::allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2> > > std::__allocate_guarded<std::allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2> > >(std::__allocated_ptr&) (allocated_ptr.h:97)
==53135==    by 0x12BAD3: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*&, std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:677)
==53135==    by 0x12B941: std::__shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:1344)
==53135==    by 0x12B73C: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >::shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:359)
==53135==    by 0x12B5A9: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::allocate_shared<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:702)
==53135==    by 0x110AFB: std::shared_ptr<std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::__create_task_state<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int> >(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&, std::allocator<int> const&) (future:1454)
==53135==    by 0x12A722: std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::packaged_task<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, void>(std::allocator_arg_t, std::allocator<int> const&, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&) (future:1501)
==53135==    by 0x1292A6: std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::packaged_task<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, void>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&) (future:1492)
==53135==    by 0x128984: void __gnu_cxx::new_allocator<std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >::construct<std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >(std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&) (new_allocator.h:146)
==53135==  Block was alloc'd by thread #1
==53135== 
==53135== ----------------------------------------------------------------
==53135== 
==53135== Possible data race during read of size 1 at 0x4DDA520 by thread #1
==53135== Locks held: none
==53135==    at 0x12DEC0: std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::~_Result() (future:240)
==53135==    by 0x12DF07: std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::~_Result() (future:242)
==53135==    by 0x12DE99: std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::_M_destroy() (future:263)
==53135==    by 0x1124FE: std::__future_base::_Result_base::_Deleter::operator()(std::__future_base::_Result_base*) const (future:213)
==53135==    by 0x1175C7: std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>::~unique_ptr() (unique_ptr.h:292)
==53135==    by 0x12C8DB: std::__future_base::_State_baseV2::~_State_baseV2() (future:328)
==53135==    by 0x12C949: std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::~_Task_state_base() (future:1380)
==53135==    by 0x12CF3D: std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::~_Task_state() (future:1407)
==53135==    by 0x12E60B: void __gnu_cxx::new_allocator<int>::destroy<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*) (new_allocator.h:152)
==53135==    by 0x12DFA8: void std::allocator_traits<std::allocator<int> >::destroy<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >(std::allocator<int>&, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*) (alloc_traits.h:496)
==53135==    by 0x12D400: std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() (shared_ptr_base.h:557)
==53135==    by 0x11A72B: std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() (shared_ptr_base.h:155)
==53135== 
==53135== This conflicts with a previous write of size 1 by thread #2
==53135== Locks held: none
==53135==    at 0x12FAEE: std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::_M_set(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&) (future:259)
==53135==    by 0x12F549: std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_M_run()::{lambda()#1}, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::operator()() const (future:1339)
==53135==    by 0x12EB46: std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_M_run()::{lambda()#1}, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > >::_M_invoke(std::_Any_data const&) (std_function.h:286)
==53135==    by 0x117B03: std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>::operator()() const (std_function.h:688)
==53135==    by 0x112B33: std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) (future:561)
==53135==    by 0x11D926: void std::__invoke_impl<void, void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::__invoke_memfun_deref, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:73)
==53135==    by 0x11A91A: std::__invoke_result<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>::type std::__invoke<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:95)
==53135==    by 0x1176B3: void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::{lambda()#1}::operator()() const (mutex:671)
==53135==  Address 0x4dda520 is 48 bytes inside a block of size 56 alloc'd
==53135==    at 0x483CF03: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==53135==    by 0x12CCB9: std::unique_ptr<std::__future_base::_Result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::__future_base::_Result_base::_Deleter> std::__future_base::_S_allocate_result<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int>(std::allocator<int> const&) (future:303)
==53135==    by 0x12CB56: std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_Task_state_base<std::allocator<int> >(std::allocator<int> const&) (future:1387)
==53135==    by 0x12C9D5: std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::_Task_state<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>(LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (future:1413)
==53135==    by 0x12C718: void __gnu_cxx::new_allocator<int>::construct<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (new_allocator.h:146)
==53135==    by 0x12C461: void std::allocator_traits<std::allocator<int> >::construct<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::allocator<int> const&>(std::allocator<int>&, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::allocator<int> const&) (alloc_traits.h:483)
==53135==    by 0x12C020: std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:548)
==53135==    by 0x12BB46: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*&, std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:679)
==53135==    by 0x12B941: std::__shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:1344)
==53135==    by 0x12B73C: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >::shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:359)
==53135==    by 0x12B5A9: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::allocate_shared<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:702)
==53135==    by 0x110AFB: std::shared_ptr<std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::__create_task_state<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int> >(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&, std::allocator<int> const&) (future:1454)
==53135==  Block was alloc'd by thread #1
==53135== 
==53135== ----------------------------------------------------------------
==53135== 
==53135== Possible data race during write of size 8 at 0x4DDA458 by thread #1
==53135== Locks held: none
==53135==    at 0x1175CC: std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>::~unique_ptr() (unique_ptr.h:293)
==53135==    by 0x12C8DB: std::__future_base::_State_baseV2::~_State_baseV2() (future:328)
==53135==    by 0x12C949: std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::~_Task_state_base() (future:1380)
==53135==    by 0x12CF3D: std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::~_Task_state() (future:1407)
==53135==    by 0x12E60B: void __gnu_cxx::new_allocator<int>::destroy<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*) (new_allocator.h:152)
==53135==    by 0x12DFA8: void std::allocator_traits<std::allocator<int> >::destroy<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >(std::allocator<int>&, std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*) (alloc_traits.h:496)
==53135==    by 0x12D400: std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() (shared_ptr_base.h:557)
==53135==    by 0x11A72B: std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() (shared_ptr_base.h:155)
==53135==    by 0x1173DA: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() (shared_ptr_base.h:730)
==53135==    by 0x112BB9: std::__shared_ptr<std::__future_base::_State_baseV2, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() (shared_ptr_base.h:1169)
==53135==    by 0x11AC0F: std::__shared_ptr<std::__future_base::_State_baseV2, (__gnu_cxx::_Lock_policy)2>::reset() (shared_ptr_base.h:1287)
==53135==    by 0x11B91E: std::__basic_future<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::_Reset::~_Reset() (future:753)
==53135== 
==53135== This conflicts with a previous write of size 8 by thread #2
==53135== Locks held: none
==53135==    at 0x11D9FA: std::enable_if<std::__and_<std::__not_<std::__is_tuple_like<std::__future_base::_Result_base*> >, std::is_move_constructible<std::__future_base::_Result_base*>, std::is_move_assignable<std::__future_base::_Result_base*> >::value, void>::type std::swap<std::__future_base::_Result_base*>(std::__future_base::_Result_base*&, std::__future_base::_Result_base*&) (move.h:194)
==53135==    by 0x11AB66: std::__uniq_ptr_impl<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>::swap(std::__uniq_ptr_impl<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>&) (unique_ptr.h:162)
==53135==    by 0x117AB0: std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>::swap(std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>&) (unique_ptr.h:410)
==53135==    by 0x112B51: std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) (future:566)
==53135==    by 0x11D926: void std::__invoke_impl<void, void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::__invoke_memfun_deref, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:73)
==53135==    by 0x11A91A: std::__invoke_result<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>::type std::__invoke<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:95)
==53135==    by 0x1176B3: void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::{lambda()#1}::operator()() const (mutex:671)
==53135==    by 0x1176E2: void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::{lambda()#2}::operator()() const (mutex:676)
==53135==  Address 0x4dda458 is 24 bytes inside a block of size 112 alloc'd
==53135==    at 0x483CF03: operator new(unsigned long) (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_helgrind-amd64-linux.so)
==53135==    by 0x12C64F: __gnu_cxx::new_allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2> >::allocate(unsigned long, void const*) (new_allocator.h:114)
==53135==    by 0x12C369: std::allocator_traits<std::allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2> > >::allocate(std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2>&, unsigned long) (alloc_traits.h:443)
==53135==    by 0x12BEA5: std::__allocated_ptr<std::allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2> > > std::__allocate_guarded<std::allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, (__gnu_cxx::_Lock_policy)2> > >(std::__allocated_ptr&) (allocated_ptr.h:97)
==53135==    by 0x12BAD3: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*&, std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:677)
==53135==    by 0x12B941: std::__shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr_base.h:1344)
==53135==    by 0x12B73C: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >::shared_ptr<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Sp_alloc_shared_tag<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:359)
==53135==    by 0x12B5A9: std::shared_ptr<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::allocate_shared<std::__future_base::_Task_state<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&, LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} (&&)(), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> const&) (shared_ptr.h:702)
==53135==    by 0x110AFB: std::shared_ptr<std::__future_base::_Task_state_base<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> > std::__create_task_state<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > (), std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int> >(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&, std::allocator<int> const&) (future:1454)
==53135==    by 0x12A722: std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::packaged_task<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, std::allocator<int>, void>(std::allocator_arg_t, std::allocator<int> const&, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&) (future:1501)
==53135==    by 0x1292A6: std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>::packaged_task<std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>, void>(std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&) (future:1492)
==53135==    by 0x128984: void __gnu_cxx::new_allocator<std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()> >::construct<std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()> >(std::packaged_task<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > ()>*, std::_Bind<LFHandler::handle(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)::{lambda()#1} ()>&&) (new_allocator.h:146)
==53135==  Block was alloc'd by thread #1
==53135== 
==53135== 
==53135== Use --history-level=approx or =none to gain increased speed, at
==53135== the cost of reduced accuracy of conflicting-access information
==53135== For lists of detected and suppressed errors, rerun with: -s
==53135== ERROR SUMMARY: 12 errors from 12 contexts (suppressed: 76 from 17)
